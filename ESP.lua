local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local highlightSelf = false
local Highlighted = {}
local Highlights = {}
local FColor,FTrans,OColor,OTrans = Color3.fromRGB(255,0,0),.5,Color3.fromRGB(0,0,0),0

Hightlight = function(Object)
	if table.find(Highlighted,Object) then return end
	local HighLight = Instance.new("Highlight")
	HighLight.FillColor = FColor
	HighLight.FillTransparency = FTrans
	HighLight.OutlineColor = OColor
	HighLight.OutlineTransparency = OTrans
	HighLight.Parent = Object
	table.insert(Highlighted,Object)
	table.insert(Highlights,HighLight)
	HighLight.Destroying:Connect(function()
		table.remove(Highlights,HighLight)
		table.remove(Highlighted,Object)
	end)
end

CharacterAdded = function(Character)
	Hightlight(Character)
end

HighlightPlayer = function(Player)
	if not highlightSelf then if Player == LocalPlayer then return end end
	local Success = pcall(function()
		return Player.Character
	end)
	if Success then
		Hightlight(Player.Character)
	end
	Player.CharacterAdded:Connect(CharacterAdded)
end

for _,Player in pairs(Players:GetPlayers()) do
	HighlightPlayer(Player)
end

Players.PlayerAdded:Connect(HighlightPlayer)

--// Delete everything above this message if it doesn't work, then edit line 67 and turn the transparency to 0

function isnil(thing)
return (thing == nil)
end


local function round(n)
return math.floor(tonumber(n) + 0.5)
end

function UpdatePlayerChams()
for i,v in pairs(game:GetService'Players':GetChildren()) do
pcall(function()
if not isnil(v.Character) then
for _,k in pairs(v.Character:GetChildren()) do
if k:IsA'BasePart' and not k:FindFirstChild'Cham' then
local cham = Instance.new('BoxHandleAdornment',k)
cham.ZIndex= 10
cham.Adornee=k
cham.AlwaysOnTop=true
cham.Size=k.Size
cham.Transparency=1
cham.Color3=Color3.new(1,0,0)
cham.Name = 'Cham'
end
end
if not isnil(v.Character.Head) and not v.Character.Head:FindFirstChild'NameEsp' then
local bill = Instance.new('BillboardGui',v.Character.Head)
bill.Name = 'NameEsp'
bill.Size=UDim2.new(0, 100, 0, 150)
bill.Adornee=v.Character.Head
bill.AlwaysOnTop=true
local TextLabel = Instance.new('TextLabel',bill)
				TextLabel.BackgroundTransparency = 1
				TextLabel.Position = UDim2.new(0, 0, 0, -50)
				TextLabel.Size = UDim2.new(0, 100, 0, 100)
				TextLabel.Font = Enum.Font.SourceSansSemibold
				TextLabel.TextSize = 20
				TextLabel.TextColor3 = Color3.new(1, 1, 1)
				TextLabel.TextStrokeTransparency = 0
				TextLabel.TextYAlignment = Enum.TextYAlignment.Bottom
				TextLabel.Text = 'Name: '..plr.Name
				TextLabel.ZIndex = 10
else
v.Character.Head.NameEsp.TextLabel.Text = ('Name: '..v.DisplayName ..' | Health: '.. v.Character.Humanoid.Health ..' | Distance: '..round((game:GetService('Players').LocalPlayer.Character.Head.Position - v.Character.Head.Position).Magnitude/1))
game.Players.LocalPlayer.Character.Head.NameEsp:Destroy()
game.Players.LocalPlayer.Character.Head.NameEsp:Destroy()
game.Players.LocalPlayer.Character.Head.NameEsp:Destroy()
end
end
end)
end
end

while wait() do
UpdatePlayerChams()
end
game:GetService'StarterGui':SetCore('SendNotification', {
  Title = 'ESP has been loaded. Creator: UsernameHere#9671',
  Text = 'Test',
  Duration = 3
})
